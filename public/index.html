<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.10.0/css/all.min.css"
        integrity="sha512-PgQMlq+nqFLV4ylk1gwUOgm6CtIIXkKwaIHp/PAIWHzig/lKZSEGKEysh0TCVbHJXCLN7WetD8TFecIky75ZfQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
        integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

        <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ML15BDVSZJ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ML15BDVSZJ');
</script>

    </head>
<style>

    .main_cont {
        height: 110vh;
        width: 100vw;
        background-color: rgb(25, 31, 16);

    }

    .main_cont .top {
        z-index: 999999999;
    }

    .main_cont .container .title_bg .alert {
        /* position: relative; */
        /* display: none; */
    }

    .main_cont .container .title_bg .show_alrt {
        display: flex;
        justify-content: center;
        background-color: red;
        color: white;
        display: flex;
    }


    .main_cont .top .navbar {
        height: 8vh;
    }

    .main_cont .top nav button {
        display: none;
        /* color: red !important;
        position: absolute;
        right: 10px; */
    }

    .main_cont .top nav .topbar_controls .logo i {
        color: white;
        font-size: 19px;

    }

    .main_cont .top nav .topbar_controls .logo a {
        color: white;
        text-decoration: none;
        font-size: 19px;
    }
    .main_cont .container .title_sm{
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
    }

    .navbar .topbar_controls .links {
        display: flex;
    }

    .navbar .topbar_controls {
        display: flex;

    }

    .navbar .topbar_controls .links a {
        color: white;
        font-size: 19px;
        padding-right: 10px;

    }

    .navbar .topbar_controls .links {
        position: absolute;
        right: 10px;

    }

    .navbar .topbar_controls .links .link1,
    .link2 {
        margin-right: 13px;
    }

    .main_cont .container {
        position: relative;
        top: 150px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        /* position: fixed; */
    }

    .main_cont .container .impts_btns {
        display: flex;
        justify-content: center;
    }

    .main_cont .container .title_bg h1 {
        display: inline;
        font-size: 60px;
        font-weight: 600 !important;
    }

    .main_cont .container .title_bg .new_badge {
        position: absolute;
        font-size: 16px;
        display: none;
        /* top: 10px; */

    }

    .main_cont .container .impts_btns .inpts input {
        width: 30vw;
        height: 7vh;
        border-radius: 0% !important;
        border-bottom-left-radius: 15px !important;
    }

    .main_cont .container .impts_btns .btns button {

        height: 7vh;
        border-radius: 0% !important;
        border-top-right-radius: 15px !important;
    }

    .main_cont .container .impts_btns {
        margin-top: 20px;
    }

    .main_cont .container .r_content_cls {
        display: flex;
    }

    .main_cont .container .d_flex {
        display: flex;
    }

    .container .r_content_cls .right {
        display: flex;
        justify-content: center;
        flex-direction: column;
        /* justify-content: center; */
    }

    .container .r_content_cls .right .radio_controls {
        /* background-color: greenyellow; */
        margin-top: -35px;
        margin-bottom: 20px;
        display: flex;
        flex-direction: row;
        justify-content: center;

    }
/* changes made recently */
    .main_cont .container .r_content_cls {
        display: flex;

        display: none;
    }

    .main_cont .container .r_content_cls_show {
        display: flex;
        flex-direction: row;
    }

    input[type=radio] {
        width: 20px;
        height: 20px;

    }

    .mp4_cls,
    .mp3_cls {
        font-family: Verdana, Geneva, Tahoma, sans-serif;
        font-size: 25px;
        position: relative;
        top: -4px;
        padding-right: 10px;
    }

    .main_cont .top .collapse .links1 {
        display: flex;
        flex-direction: column;

    }

    /* .main_cont .top .navbar .btn_change_height{

    } */
    .main_cont .container .loading i {
        -webkit-animation: rotating 2s linear infinite;
        -moz-animation: rotating 2s linear infinite;
        -ms-animation: rotating 2s linear infinite;
        -o-animation: rotating 2s linear infinite;
        animation: rotating 1.6s linear infinite;

    }

    .main_cont .container .loading img {
        /* display: none; */
        /* display: inline;    */
        /* display: none; */
    }

    /* .show_loading{ 
        color: white !important;
        display: inline-block;
    } */


    @-webkit-keyframes rotating

    /* Safari and Chrome */
        {
        from {
            -webkit-transform: rotate(0deg);
            -o-transform: rotate(0deg);
            transform: rotate(0deg);
        }

        to {
            -webkit-transform: rotate(360deg);
            -o-transform: rotate(360deg);
            transform: rotate(360deg);
        }
    }

    .main_cont .container .loading img {
        display: none;
    }

    .main_cont .container .loading .show_loading {
        opacity: 1;
        display: inline;
    }

    .main_cont .container .loading .opasity_zero {
        opacity: 0;
    }
    .main_cont  .container .r_content_cls .right .dwnld_btn button{
        position: relative;
        top: 50px;
    }



    /* MEDIA QUERY CODE GOES HERE */
    @media only screen and (max-width: 330px) {
        .main_cont .top nav button {
            display: inline-block;
        }

        .main_cont .container .r_content_cls_show {
            display: flex;
            flex-direction: column;
        }

        .navbar .topbar_controls .links {
            display: none;
        }

        .main_cont .top .navbar {
            height: 10vh;
        }

        .main_cont .container .title_bg h1 {
            font-size: 30px;
            text-align: center;
        }

        .main_cont .container {
            top: 10px;
        }

        .main_cont .container .impts_btns .inpts input {
            width: 50vw;
        }

        .main_cont .container .title_sm {
            font-size: 13px;
        }

        .main_cont .container .title_bg {
            display: flex;
            /* flex-direction: column; */
        }

        .main_cont .container .title_bg h1 span {
            font-size: 9px !important;
            position: relative;
            top: 48px;
        }

        .main_cont .container .r_content_cls .left .vid_title p {
            font-size: 13px;
            margin-top: -20px;
        }

        .container .r_content_cls .right .radio_controls .form-check label p {

            font-size: 15px;
        }

        .container .r_content_cls .right .radio_controls .form-check {
            position: relative;
            top: 50px;
        }

        input[type=radio] {
            width: 15px;
            height: 15px;

        }
        .main_cont  .container .r_content_cls .right .dwnld_btn{
                display: flex;
                justify-content: center;
                align-items: center;
        }

      .main_cont  .container .r_content_cls .right .dwnld_btn button {
            position: relative;
            top: 70px;
            
            /* background-color: red !important; */
        }

        .max_hight {
            height: 159vh;
        }

        .main_cont .top {
            position: relative !important;
        }

        .main_cont .container .title_bg {
            display: flex;
            flex-direction: column;
        }

        .main_cont .container .title_bg h1 span {
            top: 73px;
            /* position: absolute; */
            left: 254px;
        }
    }
    /* MEDIA QUERY 455 PX */
    @media only screen and (max-width: 480px) {
        .main_cont .top nav button {
            display: inline-block;
        }

        .main_cont .container .r_content_cls_show {
            display: flex;
            flex-direction: column;
        }

        .navbar .topbar_controls .links {
            display: none;
        }

        .main_cont .top .navbar {
            height: 10vh;
        }

        .main_cont .container .title_bg h1 {
            font-size: 40px;
            text-align: center;
        }
        .main_cont .container .title_sm p{
            font-size: 11px;
            text-align: center;
            
        }

        .main_cont .container {
            top: 10px;
        }

        .main_cont .container .impts_btns .inpts input {
            width: 60vw;
        }

        .main_cont .container .title_sm {
            font-size: 13px;
        }

        .main_cont .container .title_bg {
            display: flex;
            /* flex-direction: column; */
        }

        .main_cont .container .title_bg h1 span {
            font-size: 9px !important;
            position: relative;
            top: 48px;
        }

        .main_cont .container .r_content_cls .left .vid_title p {
            font-size: 13px;
            margin-top: -20px;
        }

        .container .r_content_cls .right .radio_controls .form-check label p {

            font-size: 15px;
        }

        .container .r_content_cls .right .radio_controls .form-check {
            position: relative;
            top: 50px;
        }

        input[type=radio] {
            width: 15px;
            height: 15px;

        }
        .main_cont  .container .r_content_cls .right .dwnld_btn{
                display: flex;
                justify-content: center;
                align-items: center;
        }

      .main_cont  .container .r_content_cls .right .dwnld_btn button {
            position: relative;
            top: 70px;
            
            /* background-color: red !important; */
        }

        .max_hight {
            height: 159vh;
        }

        .main_cont .top {
            position: relative !important;
        }

        .main_cont .container .title_bg {
            display: flex;
            flex-direction: column;
        }

        .main_cont .container .title_bg h1 span {
            top: 73px;
            /* position: absolute; */
            left: 254px;
        }
    }
</style>

<body>
    <div class="main_cont" id="main_cont_id">

        <div class="top position-fixed w-100 pos-f-t ">
            <div class="collapse" id="navbarToggleExternalContent">
                <div class="bg-dark links1  p-4">
                    <a href="/privacyp" class="h6 py-2 text-light">Privacy Policy </a>

                    <a href="/termsofuse" class="h6 py-2 text-light">Terms of use</a>

                </div>
            </div>
            <nav class="navbar navbar-dark bg-dark">
                <div class="topbar_controls">
                    <div class="logo">
                        <i class="fab fa-youtube"></i><a class="ml-2" href="">DownloadKro!</a>
                    </div>
                    <div class="links">
                        <a class="link1" href="/privacyp">Privacy Policy </a>

                        <a class="link3" href="/termsofuse">Terms of use</a>
                    </div>
                </div>
                <button class="navbar-toggler  ham_btn" id="ham_btn_id" type="button" data-toggle="collapse"
                    data-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent"
                    aria-expanded="true" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
            </nav>
        </div>
        <!-- BODY -->
        <div class="container" id="container_id">
            <div class="title_bg" id="bdy">
                <!-- ALERT -->
                <div class="alert  show_alert  text-center" id="alert_id" role="alert">
                    <p class="m-0 p-0" id="invalid_url_txt">Please enter URL bellow</p>
                </div>
                <!-- ALERT -->

                <!-- ALERT -->
                <h1 class="my-2 text-warning fw-bold">YouTube Video Downloader<span
                        class="new_badge badge badge-danger">New</span></h1>
            </div>
            <div class="title_sm">
                <!-- <button class="hidetttt" id="btn1">click</button> -->
                <p class="text-white">By using our service you accept our<a href="/termsofuse" class="text-success"> Terms of Service</a> and <a class="text-success" href="/privacyp"> Privacy Policy</a></p>
                <p id="note_txt" class="text-white my-0 badge-danger"></p>
            </div>
            <div class="impts_btns">
                <div class="inpts">
                    <input type="text" class="form-control" id="formGroupExampleInput"
                        placeholder="Enter YouTube Video URL/Link">
                </div>
                <div class="btns">
                    <button class="btn btn-primary fw-bold" onclick="changeText()" id="c_btn">Convert</button>

                </div>
            </div>
            <div class="r_content_cls d_flex mt-5 " id="r_content_id">
                <div class="left w-50 ">
                    <div class="vid_title">
                        <!-- video title -->
                        <p class="text-light" id="text-light_id"></p>
                    </div>
                    <div class="thumbnail_cls text-center" id="thumbnail_id">
                        <img height="150px" style="border: 1px solid white;" id="thumb_id" width="300px"
                            alt="thumbnail">
                    </div>
                </div>

                <div class="right w-50 ">
                    <div class="radio_controls">
                        <div class="form-check" id="select_options">
                        
                        <div class="form-check">
                       
                    </div>
                    <div class="dwnld_btn  text-center">
                        <button class="btn btn-primary position-absolute" id="dwld_btn">Download</button>
                    </div>
                </div>
            </div>
            <div class="loading  hide_loading" id="loading_cont_issd">
                <!-- <i class="fas fa-5x mt-5 fa-sync text-light" id="loading_icon"></i> -->
                <img id="img_id"
                    src="https://cutewallpaper.org/21/loading-gif-transparent-background/Download-Loading-Gif-Generator-Transparent-Background-PNG-.gif"
                    height="130px" width="130px" alt="">
                <h1 class="color_change hide1 show1" id="bojja"></h1>
            </div>
         
        </div>

    </div>
    <!-- CUSTOM JS SCRIPTS -->
    <script>
        let flag = 0;
        function changeText() 
        {
            if (flag == 1) {
                console.log("putty")
                document.getElementById('img_id').classList.add('show_loading')
            }

        }

        document.getElementById('ham_btn_id').addEventListener('click', () => {
            document.getElementById('container_id').classList.toggle('btn_change_height')
        })

        // CONVER BUTTON
        document.getElementById('c_btn').addEventListener('click', () => {
            document.getElementById('c_btn').style.backgroundColor="green"
            

           let flag_val=false;
           if(flag_val==true)
           {
            location.reload();
           }
            const videoURL = document.getElementById('formGroupExampleInput').value.trim();
            if (videoURL.length == 0) {
                document.getElementById('alert_id').classList.add('show_alrt')
            }
            // validating youtube URL
            else if (videoURL != undefined || videoURL != '') 
            {
                var regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=|\?v=)([^#\&\?]*).*/;
                var match = videoURL.match(regExp);
                if (!(match && match[2].length == 11)) 
                {
                    document.getElementById('invalid_url_txt').innerHTML = "Invalid URL";
                    document.getElementById('alert_id').classList.add('show_alrt')
                    console.log("first")
                }
                else {
                  
                    try {
                        document.getElementById('c_btn').innerText="loading..."
                        let data;
                        const host = "https://yt-downloader-by-keerthan.herokuapp.com/"
                        // const host="http://localhost:3000/"
                        flag_val=true;
                        fetch(host + "videoInfo?videoURL=" + videoURL).then(function (responce) {
                        return responce.json();
                        }).then(function (data) {
                        console.log("Return")
                        console.log(data)


                        let thumbnail = document.getElementById('thumbnail')
                        // title
                        let title = data.videoDetails.title;
                        document.getElementById('text-light_id').innerHTML = title
                        // thumbnail
                        thumbnail = data.videoDetails.thumbnails;
                        document.getElementById('thumb_id').src = thumbnail[0].url;
                        const r_content_id = document.getElementById('r_content_id');
                        r_content_id.classList.add('r_content_cls_show')

                        //dynamic formats start
                        var select = document.createElement("select");
                        select.style.borderRadius="6px"
                        select.style.backgroundColor="orange"
                        select.style.width="150px"
                        select.style.position="relative"
                        select.style.left="20px"
                        select.style.padding="5px"
                        select.style.color="white"
                              select.name = "formats";
                              select.id = "formats"
                        for (let i = 0; i < data.formats.length-1; i++)
                         {  
                             if(data.formats[i].container != "mp4")
                             {
                                 continue;
                             }

                           
                                var option = document.createElement("option");

                                 // styling options
                                 option.style.backgroundColor="white";
                                option.style.color="black";

                                option.value =data.formats[i].itag ;
                                option.text=data.formats[i].container + "-" +  data.formats[i].qualityLabel;
                                 select.appendChild(option);
                           
                             
  
                         }
                         // creating option for mp3
                         var mp3_option = document.createElement("option");
                         mp3_option.style.backgroundColor="gray";
                         mp3_option.style.color="white"

                             mp3_option.text="Mp3-Audio(Coming Soon)";
                             select.appendChild(mp3_option);

                         var label = document.createElement("label");
                         label.style.color="white"
                         label.innerHTML = "Choose formats: "
                         label.htmlFor = "formats";

                         document.getElementById("select_options").appendChild(label).appendChild(select);
                        //dynamic formats ends
                        // opacity
                        document.getElementById('img_id').classList.add('opasity_zero')

                        //    incrase height
                        const main_cont_id = document.getElementById('main_cont_id');
                        main_cont_id.classList.add('max_hight')
                        flag = 0;
                        document.getElementById('c_btn').innerText="Convert"
                        document.getElementById('note_txt').innerText=" ðŸ‘‰ Kindly Refresh the Page for next URL"
                    })

                    } catch (error) {
                        // showing alert
                        document.getElementById('invalid_url_txt').innerHTML = "Something went wrong! Please refresh";
                        document.getElementById('alert_id').classList.add('show_alrt')
                       
                    }
                       
                }//else close

            }
        });
        // DOWNLOAD 
        document.getElementById('dwld_btn').addEventListener('click', () => {
                const select=document.getElementById('formats');
                // const itag= select.options[select.selectedIndex].value;
                let itag= document.getElementById('formats').value;
               console.log("selected format"+ itag);
            if(itag=="Mp3-Audio")
            {
                itag="mp3";
            }
            const videoURL = document.getElementById('formGroupExampleInput').value.trim();
            // const host = "http://localhost:3000/"
            const host = "https://yt-downloader-by-keerthan.herokuapp.com/"
            window.open(host + "download?videoURL=" + videoURL + "&itag=" + itag)
        })

    </script>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
        integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
        integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
</body>

</html>